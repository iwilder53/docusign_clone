(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{8756:function(e,t,n){Promise.resolve().then(n.bind(n,9112))},1563:function(e,t,n){"use strict";n.d(t,{N9:function(){return w},auth:function(){return u},$2:function(){return g},HP:function(){return y},HY:function(){return x},qj:function(){return h},tO:function(){return d},u_:function(){return m}});var r=n(738),i=n(4752),o=n(5978),a=n(62);n(2495);let c=async(e,t)=>{try{let n=window.Core,r=window.Core.PDFNet;console.log(r),n.setWorkerPath("webviewer/lib/core");let i=d.ref(),o=await i.child(e).getDownloadURL(),a=async()=>{let n;let a=await r.PDFDoc.createFromURL(o);for(a.initSecurityHandler(),n=0;n<t.length;n++){console.log(t[n]);let e=await r.FDFDoc.createFromXFDF(t[n]);await a.fdfMerge(e),await a.flattenAnnotations()}let c=await a.saveMemoryBuffer(r.SDFDoc.SaveOptions.e_linearized),s=new Blob([c],{type:"application/pdf"});i.child(e).put(s).then(function(e){console.log("Uploaded the blob")})};await r.runWithCleanup(a)}catch(e){console.error(e)}},s=(0,r.ZF)({apiKey:"AIzaSyAyDmBFLsYmknmeNghLz-Xw2wLIQSMNr48",authDomain:"docusignclone.firebaseapp.com",projectId:"docusignclone",storageBucket:"docusignclone.appspot.com",messagingSenderId:"491807205117",appId:"1:491807205117:web:76f35b9931e73f4e134094"}),u=(0,i.v0)(s),l=(0,o.ad)(s),d=(0,a.cF)(s),f=new i.hJ,h=async()=>{await (0,i.rh)(u,f)},g=async(e,t)=>{if(!e)return;let n=(0,o.JU)(l,"users/".concat(e.uid));if(!(await (0,o.QT)(n)).exists){let{email:r,displayName:i,photoURL:o}=e;try{await n.set({displayName:i,email:r,photoURL:o,...t})}catch(e){console.error("Error creating user document",e)}}return p(e.uid)},p=async e=>{if(!e)return null;try{let t=(0,o.JU)(l,"users",u.currentUser.uid),n=await (0,o.QT)(t);return{uid:e,...n.data()}}catch(e){console.error("Error fetching user",e)}},w=async(e,t,n,r)=>{if(!e)return;let i=new Date,a=(0,o.JU)(l,"documentsToSign",n.split("/")[1]);(0,o.pl)(a,{uid:e,email:t,docRef:n,emails:r,xfdf:[],signedBy:[],signed:!1,requestedTime:i,signedTime:""}).then(function(e){console.log("Document written with ID: ",e)}).catch(function(e){console.error("Error adding document: ",e)})},m=async(e,t,n)=>{let r=(0,o.JU)(l,"documentsToSign",e);(0,o.QT)(r).then(async e=>{if(e.exists){let{signedBy:i,emails:a,xfdf:s,docRef:u}=e.data();if(!i.includes(t)){let e=[...i,t],l=[...s,n];if(await (0,o.r7)(r,{xfdf:l,signedBy:e}),e.length===a.length){let e=new Date;await (0,o.r7)(r,{signed:!0,signedTime:e}),c(u,l)}}}else console.log("No such document!")}).catch(function(e){console.log("Error getting document:",e)})},y=async e=>{let t=(0,o.hJ)(l,"documentsToSign"),n=(0,o.IO)(t,(0,o.ar)("emails","array-contains",e),(0,o.ar)("signed","==",!1)),r=(0,o.IO)(t,(0,o.ar)("signedBy","array-contains",e)),i=[],a=[];return await (0,o.PL)(r).then(function(e){e.forEach(function(e){let t=e.id;a.push(t)})}).catch(function(e){console.log("Error getting documents: ",e)}),await (0,o.PL)(n).then(function(e){e.forEach(function(e){let{docRef:t,email:n,requestedTime:r}=e.data(),o=e.id;a.includes(o)||i.push({docRef:t,email:n,requestedTime:r,docId:o})})}).catch(function(e){console.log("Error getting documents: ",e)}),i},x=async e=>{let t=(0,o.hJ)(l,"documentsToSign"),n=[],r=(0,o.IO)(t,(0,o.ar)("email","==",e),(0,o.ar)("signed","==",!0));return await (0,o.PL)(r).then(function(e){e.forEach(function(e){let{docRef:t,emails:r,signedTime:i}=e.data(),o=e.id;n.push({docRef:t,emails:r,signedTime:i,docId:o})})}).catch(function(e){console.log("Error getting documents: ",e)}),n}},2495:function(e,t,n){"use strict";let r=(0,n(5667).oM)({name:"MergeAnnotation",initialState:{pdfNet:null},reducers:{setInstance:(e,t)=>{e.pdfNet=t.payload},resetInstance:(e,t)=>{e.pdfNet=null}}}),{setInstance:i,resetInstance:o}=r.actions;t.ZP=r.reducer},9112:function(e,t,n){"use strict";var r=n(7437),i=n(2265),o=n(6017);n(2739),n(1563);var a=n(9376),c=n(7648),s=n(4752);t.default=()=>{let[e,t]=(0,i.useState)(""),[n,u]=(0,i.useState)(!1),[l,d]=(0,i.useState)(null),f=(0,a.useRouter)(),h=t=>{(0,s.LS)(e).then(()=>{u(!0),setTimeout(()=>{u(!1)},3e3)}).catch(()=>{d("Error resetting password")})};return(0,r.jsx)("div",{children:(0,r.jsx)(o.xu,{padding:3,children:(0,r.jsxs)(o.W2,{children:[(0,r.jsx)(o.xu,{padding:3,children:(0,r.jsx)(o.X6,{size:"md",children:"Reset your password"})}),null!==l&&(0,r.jsx)(o.FN,{text:l}),!1!==n&&(0,r.jsx)(o.FN,{text:"An email with reset info is on the way"}),(0,r.jsx)(o.xu,{padding:2,children:(0,r.jsx)(o.nv,{id:"email",onChange:e=>t(e.value),placeholder:"Enter your email",label:"Email",value:e,type:"email"})}),(0,r.jsx)(o.xu,{padding:2,children:(0,r.jsx)(o.zx,{onClick:e=>{h(e),f.push("/")},text:"Reset",color:"blue",inline:!0})}),(0,r.jsx)(o.xu,{padding:2,children:(0,r.jsx)(c.default,{href:"/",className:"text-blue-500 hover:text-blue-600",children:"Back to the Sign in"})})]})})})}}},function(e){e.O(0,[224,525,358,533,667,360,648,971,117,744],function(){return e(e.s=8756)}),_N_E=e.O()}]);