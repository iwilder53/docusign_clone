(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[318],{980:function(e,n,t){Promise.resolve().then(t.bind(t,3325))},1563:function(e,n,t){"use strict";t.d(n,{N9:function(){return x},auth:function(){return l},$2:function(){return f},HP:function(){return m},HY:function(){return y},qj:function(){return g},tO:function(){return d},u_:function(){return w}});var a=t(738),i=t(4752),r=t(5978),o=t(62);t(2495);let c=async(e,n)=>{try{let t=window.Core,a=window.Core.PDFNet;console.log(a),t.setWorkerPath("webviewer/lib/core");let i=d.ref(),r=await i.child(e).getDownloadURL(),o=async()=>{let t;let o=await a.PDFDoc.createFromURL(r);for(o.initSecurityHandler(),t=0;t<n.length;t++){console.log(n[t]);let e=await a.FDFDoc.createFromXFDF(n[t]);await o.fdfMerge(e),await o.flattenAnnotations()}let c=await o.saveMemoryBuffer(a.SDFDoc.SaveOptions.e_linearized),s=new Blob([c],{type:"application/pdf"});i.child(e).put(s).then(function(e){console.log("Uploaded the blob")})};await a.runWithCleanup(o)}catch(e){console.error(e)}},s=(0,a.ZF)({apiKey:"AIzaSyAyDmBFLsYmknmeNghLz-Xw2wLIQSMNr48",authDomain:"docusignclone.firebaseapp.com",projectId:"docusignclone",storageBucket:"docusignclone.appspot.com",messagingSenderId:"491807205117",appId:"1:491807205117:web:76f35b9931e73f4e134094"}),l=(0,i.v0)(s),u=(0,r.ad)(s),d=(0,o.cF)(s),h=new i.hJ,g=async()=>{await (0,i.rh)(l,h)},f=async(e,n)=>{if(!e)return;let t=(0,r.JU)(u,"users/".concat(e.uid));if(!(await (0,r.QT)(t)).exists){let{email:a,displayName:i,photoURL:r}=e;try{await t.set({displayName:i,email:a,photoURL:r,...n})}catch(e){console.error("Error creating user document",e)}}return p(e.uid)},p=async e=>{if(!e)return null;try{let n=(0,r.JU)(u,"users",l.currentUser.uid),t=await (0,r.QT)(n);return{uid:e,...t.data()}}catch(e){console.error("Error fetching user",e)}},x=async(e,n,t,a)=>{if(!e)return;let i=new Date,o=(0,r.JU)(u,"documentsToSign",t.split("/")[1]);(0,r.pl)(o,{uid:e,email:n,docRef:t,emails:a,xfdf:[],signedBy:[],signed:!1,requestedTime:i,signedTime:""}).then(function(e){console.log("Document written with ID: ",e)}).catch(function(e){console.error("Error adding document: ",e)})},w=async(e,n,t)=>{let a=(0,r.JU)(u,"documentsToSign",e);(0,r.QT)(a).then(async e=>{if(e.exists){let{signedBy:i,emails:o,xfdf:s,docRef:l}=e.data();if(!i.includes(n)){let e=[...i,n],u=[...s,t];if(await (0,r.r7)(a,{xfdf:u,signedBy:e}),e.length===o.length){let e=new Date;await (0,r.r7)(a,{signed:!0,signedTime:e}),c(l,u)}}}else console.log("No such document!")}).catch(function(e){console.log("Error getting document:",e)})},m=async e=>{let n=(0,r.hJ)(u,"documentsToSign"),t=(0,r.IO)(n,(0,r.ar)("emails","array-contains",e),(0,r.ar)("signed","==",!1)),a=(0,r.IO)(n,(0,r.ar)("signedBy","array-contains",e)),i=[],o=[];return await (0,r.PL)(a).then(function(e){e.forEach(function(e){let n=e.id;o.push(n)})}).catch(function(e){console.log("Error getting documents: ",e)}),await (0,r.PL)(t).then(function(e){e.forEach(function(e){let{docRef:n,email:t,requestedTime:a}=e.data(),r=e.id;o.includes(r)||i.push({docRef:n,email:t,requestedTime:a,docId:r})})}).catch(function(e){console.log("Error getting documents: ",e)}),i},y=async e=>{let n=(0,r.hJ)(u,"documentsToSign"),t=[],a=(0,r.IO)(n,(0,r.ar)("email","==",e),(0,r.ar)("signed","==",!0));return await (0,r.PL)(a).then(function(e){e.forEach(function(e){let{docRef:n,emails:a,signedTime:i}=e.data(),r=e.id;t.push({docRef:n,emails:a,signedTime:i,docId:r})})}).catch(function(e){console.log("Error getting documents: ",e)}),t}},2495:function(e,n,t){"use strict";let a=(0,t(5667).oM)({name:"MergeAnnotation",initialState:{pdfNet:null},reducers:{setInstance:(e,n)=>{e.pdfNet=n.payload},resetInstance:(e,n)=>{e.pdfNet=null}}}),{setInstance:i,resetInstance:r}=a.actions;n.ZP=a.reducer},3325:function(e,n,t){"use strict";var a=t(7437),i=t(2265),r=t(1563),o=t(6017);t(2739);var c=t(7648),s=t(9376);n.default=()=>{let[e,n]=(0,i.useState)(""),[t,l]=(0,i.useState)(""),[u,d]=(0,i.useState)(""),[h,g]=(0,i.useState)(null),f=(0,s.useRouter)(),p=async(e,t,a)=>{try{let{user:e}=await r.auth.createUserWithEmailAndPassword(t,a);(0,r.$2)(e,{displayName:u})}catch(e){g("Error Signing up with email and password")}n(""),l(""),d("")};return(0,a.jsx)("div",{children:(0,a.jsx)(o.xu,{padding:3,children:(0,a.jsxs)(o.W2,{children:[(0,a.jsxs)(o.xu,{padding:3,children:[null!==h&&(0,a.jsx)(o.FN,{text:h}),(0,a.jsx)(o.X6,{size:"md",children:"Sign up"})]}),(0,a.jsx)(o.xu,{padding:2,children:(0,a.jsx)(o.nv,{id:"displayName",onChange:e=>d(e.value),placeholder:"Enter your name",label:"Name",value:u,type:"text"})}),(0,a.jsx)(o.xu,{padding:2,children:(0,a.jsx)(o.nv,{id:"email",onChange:e=>n(e.value),placeholder:"Enter your email",label:"Email",value:e,type:"email"})}),(0,a.jsx)(o.xu,{padding:2,children:(0,a.jsx)(o.nv,{id:"password",onChange:e=>l(e.value),placeholder:"Enter your password",label:"Password",value:t,type:"password"})}),(0,a.jsx)(o.xu,{padding:2,children:(0,a.jsx)(o.zx,{onClick:n=>{p(n,e,t),f.push("/")},text:"Sign up",color:"blue",inline:!0})}),(0,a.jsx)(o.xu,{padding:2,children:(0,a.jsx)(o.xv,{children:"or"})}),(0,a.jsx)(o.xu,{padding:2,children:(0,a.jsx)(o.zx,{onClick:r.qj,text:"Sign in with Google",color:"red",inline:!0})}),(0,a.jsx)(o.xu,{padding:2,children:(0,a.jsx)(o.xv,{children:"Already have an account?"})}),(0,a.jsx)(o.xu,{padding:2,children:(0,a.jsx)(c.default,{href:"/",className:"text-blue-500 hover:text-blue-600",children:"Sign in here"})})]})})})}}},function(e){e.O(0,[224,525,358,533,667,360,648,971,117,744],function(){return e(e.s=980)}),_N_E=e.O()}]);